(window.webpackJsonp=window.webpackJsonp||[]).push([[77,83],{609:function(e,t,r){"use strict";r.r(t);var n={data:function(){return{show:!1}}},c=r(11),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"msg-dropdown-main"},[r("div",{staticClass:"msg-setting"},[r("i",{staticClass:"ti-more-alt",on:{click:function(t){e.show=!e.show}}})]),e._v(" "),r("div",{staticClass:"msg-dropdown",style:e.show?"display:block;":"display:none"},[e._m(0)])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-share"}),e._v("forward")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-clone"}),e._v("copy")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-star-o"}),e._v("rating")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"ti-trash"}),e._v("delete")])])])}],!1,null,null,null);t.default=component.exports},671:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contact-chat"},[r("div",{staticClass:"rightchat animat-rate"},[r("div",{staticClass:"bg_circle"},[r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div")]),e._v(" "),r("div",{staticClass:"cross"}),e._v(" "),r("div",{staticClass:"cross1"}),e._v(" "),r("div",{staticClass:"cross2"}),e._v(" "),r("div",{staticClass:"dot"}),e._v(" "),r("div",{staticClass:"dot1"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"call-list-center"},[n("img",{attrs:{src:r(296),alt:""}}),e._v(" "),n("div",{staticClass:"animated-bg"},[n("i"),n("i"),n("i")]),e._v(" "),n("p",[e._v("Select a chat to read messages")])])}],c=r(0),d=r(18),o=(r(37),r(5),r(4),r(2),r(1),r(6),r(3),r(7),r(47),r(17)),l=r(609),f=r(46),h=r.n(f),v=r(184),m=r(189);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var y={directives:{linkify:r.n(m).a},components:{DropDown:l.default},data:function(){return{currentchat:[],testdata:[],refresh:!1,styleObject:{"background-size":"cover","background-position":"center",display:"block"}}},methods:{previewimage:function(image){window.open(image,"_blank")},getImgUrl:function(){return r(134)},getDefaultimage:function(){return r(344)},getReadicon:function(){return r(346)},getUnreadicon:function(){return r(347)},resendfailed:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("TEXT"!=e.contenttype){r.next=8;break}return n={sessionId:e.sessionid,referenceKey:Object(v.v4)(),contentType:"TEXT",content:e.content,destructTime:0,senderId:t.userprofile.id,oaId:t.userprofile.id},t.setMessage(t.sessionID),r.next=5,t.$store.dispatch("chat/addChat",n);case 5:c=r.sent,console.log(c),"success"!=c.data.message&&(t.addDataToRealm(n,"failedUpdateDummyMesaage"),t.setMessage(t.sessionID));case 8:case"end":return r.stop()}}),r)})))()},addMessage:function(e){var t=e.target.scrollHeight;if(e.target.scrollTop<=0){this.$store.state.chat.messagelength+=5,this.setMessage(this.sessionroom);var r=document.querySelector(".scrolltopdirectchat");setTimeout((function(){var e=r.scrollHeight-t;r.scrollBy(0,e)}),10)}},checksender:function(e,t){if(this.userprofile.adminuserids)return-1!=this.userprofile.adminuserids.indexOf(e)},numcalcHeight:function(e,t){return"".concat(t*(26800/e)/100,"px")},checkwidth:function(e,t){return e===t&&e<268?"268px":"".concat(e,"px")},infoTime:function(time){var e=h.a.utc(time).toDate();return h()(e).local().format("DD/MM/YYYY")==h()(new Date).format("DD/MM/YYYY")?h()(e).local().format("HH:mm"):h()(e).local().format("DD/MM")}},mounted:function(){document.querySelector(".scrolltopdirectchat").addEventListener("scroll",this.addMessage,!1)},beforeDestroy:function(){document.querySelector(".scrolltopdirectchat").removeEventListener("scroll",this.addMessage,!1)},destroyed:function(){document.querySelector(".scrolltopdirectchat").removeEventListener("scroll",this.addMessage,!1)},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)({typing:function(e){return e.chat.typing},sessionroom:function(e){return e.chat.session},userprofile:function(e){return e.auth.profile},roomtype:function(e){return e.room.roomtype},loading:function(e){return e.common.loadingchat},currentChat:function(){return this.currentchat=this.$store.getters["chat/currentChat"]}}))},x=y,w=r(11),component=Object(w.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contact-chat"},[r("ul",{staticClass:"chatappend",staticStyle:{position:"relative"}},[this.loading?r("div",{staticClass:"text-center loadchat"},[r("b-spinner",{staticStyle:{position:"fixed",width:"4rem",height:"4rem"},attrs:{label:"Loading..."}})],1):e._e(),e._v(" "),e.currentChat.chat?e._l(e.currentChat.chat,(function(t,n){return r("li",{key:n,class:t.senderid==e.userprofile.id||""!==t.oaid||e.checksender(t.senderid,t)?"sent":"replies",style:e.currentChat.unread&&t.senderid!=e.userprofile.id&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread?"width:100%":"width:80%"},[e.currentChat.unread&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread&&t.senderid!=e.userprofile.id&&"user"==e.roomtype?r("p",{staticClass:"unreadmessage",staticStyle:{"margin-top":"1rem","text-align":"center","background-color":"#bcbcde",color:"#ffffff","border-radius":"10px"}},[e._v("\n          Unread message below\n        ")]):e._e(),e._v(" "),e.currentChat.unread&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread&&"official"==e.roomtype&&1!=e.checksender(t.senderid)?r("p",{staticClass:"unreadmessage",staticStyle:{"margin-top":"1rem","text-align":"center","background-color":"#bcbcde",color:"#ffffff","border-radius":"10px"}},[e._v("\n          Unread message below\n        ")]):e._e(),e._v(" "),r("div",{staticClass:"media"},[r("div",{staticClass:"profile mr-2",style:t.senderid==e.userprofile.id||""!==t.oaid||e.checksender(t.senderid)?[{display:"none"}]:[{"background-image":"null"!=t.avatar?"url("+t.avatar+")":"url("+e.getImgUrl()+")",border:"null"!=t.avatar?"none":"1px solid #edeff0"},e.styleObject]}),e._v(" "),r("div",{staticClass:"media-body"},[r("div",{staticClass:"contact-name"},[r("ul",{staticClass:"msg-box"},[r("li",{staticClass:"msg-setting-main"},["TEXT"==t.contenttype?r("h5",{directives:[{name:"linkified",rawName:"v-linkified",value:{className:"colorLink",target:"_blank"},expression:"{ className: 'colorLink', target: '_blank' }"}],staticStyle:{"white-space":"pre-wrap","text-align":"left","word-break":"break-all"}},[e._v(e._s(t.content))]):e._e(),e._v(" "),"IMAGE"==t.contenttype?r("div",{style:t.senderid==e.userprofile.id||""!==t.oaid||e.checksender(t.senderid)?"background:transparent;border-radius:6px 2px 6px 6px":"background:transparent;border-radius:2px 6px 6px 6px;"},[r("div",{staticStyle:{display:"flex","flex-wrap":"wrap","max-width":"268px"},style:t.media.length>1?"width:268px":""},[1===t.media.length?r("div",e._l(t.media,(function(image){return r("div",{key:image.mediaRefKey,style:"flex:0 0 100%"},[r("div",{style:{height:e.numcalcHeight(image.width,image.height),"min-height":e.numcalcHeight(image.width,image.height),width:e.checkwidth(image.width,image.height),"max-width":"268px",cursor:"pointer","background-image":"url('"+e.getDefaultimage()+"')","background-size":"cover","background-position":"center","border-radius":t.senderid==e.userprofile.id||""!==t.oaid||e.checksender(t.senderid)?"6px 2px 6px 6px":"2px 6px 6px 6px"},on:{click:function(t){return e.previewimage(image.imageSource)}}},[r("img",{staticStyle:{width:"100%",height:"100%"},style:t.senderid==e.userprofile.id||""!==t.oaid||e.checksender(t.senderid)?"border-radius:6px 2px 6px 6px":"border-radius:2px 6px 6px 6px",attrs:{src:image.imageSource}})])])})),0):e._e(),e._v(" "),t.media.length>1?r("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(t.media,(function(image){return r("div",{key:image.mediaRefKey,staticStyle:{flex:"1 1 50%",height:"100px",padding:"1px",cursor:"pointer"},style:{"background-image":"url('"+e.getDefaultimage()+"')","background-size":"cover","background-position":"center"},on:{click:function(t){return e.previewimage(image.imageSource)}}},[r("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover"},attrs:{src:image.imageSource}})])})),0):e._e()])]):e._e(),e._v(" "),r("div",{staticStyle:{display:"flex"}},["READ"!=t.status||t.senderid!=e.userprofile.id&&""===t.oaid&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm ",staticStyle:{display:"block"}},[r("img",{staticStyle:{width:"11px",height:"8px"},attrs:{src:e.getReadicon()}})]),e._v(" "),"READ"==t.status?r("div",{staticClass:"badge sm ml-2",staticStyle:{color:"#8D92C4"}},[e._v("\n                      "+e._s(e.infoTime(t.createdtime))+"\n                    ")]):e._e()]),e._v(" "),r("div",{staticStyle:{display:"flex"}},["SENT"!=t.status||t.senderid!=e.userprofile.id&&""===t.oaid&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm ",staticStyle:{display:"block"}},[r("img",{staticStyle:{width:"11px",height:"8px"},attrs:{src:e.getUnreadicon()}})]),e._v(" "),"SENT"==t.status?r("div",{staticClass:"badge sm ml-2",staticStyle:{color:"#8D92C4"}},[e._v("\n                      "+e._s(e.infoTime(t.createdtime))+"\n                    ")]):e._e()]),e._v(" "),"WAITING"!=t.status||t.senderid!=e.userprofile.id&&""===t.oaid&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm "},[r("b-spinner",{staticStyle:{width:"11px",height:"11px"},attrs:{variant:"secondary"}})],1),e._v(" "),"FAILED"!=t.status||t.senderid!=e.userprofile.id&&""===t.oaid&&!e.checksender(t.senderid)?e._e():r("div",{staticStyle:{display:"flex","flex-direction":"row","margin-right":"10px"}},[r("a",{staticStyle:{background:"red","border-radius":"50%",width:"20px",height:"20px",color:"white","text-align":"center","font-weight":"bold"},on:{click:function(r){return e.resendfailed(t)}}},[e._v("\n                      !\n                    ")])])])])])])])])})):e._e(),e._v(" "),e.currentChat.chat?e._e():r("div",[e._m(0),e._v(" "),e._m(1)])],2)])}),n,!1,null,null,null);t.default=component.exports}}]);