(window.webpackJsonp=window.webpackJsonp||[]).push([[76,82],{599:function(e,t,r){"use strict";r.r(t);var n={data:function(){return{show:!1}}},c=r(11),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"msg-dropdown-main"},[r("div",{staticClass:"msg-setting"},[r("i",{staticClass:"ti-more-alt",on:{click:function(t){e.show=!e.show}}})]),e._v(" "),r("div",{staticClass:"msg-dropdown",style:e.show?"display:block;":"display:none"},[e._m(0)])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-share"}),e._v("forward")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-clone"}),e._v("copy")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-star-o"}),e._v("rating")])]),e._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"ti-trash"}),e._v("delete")])])])}],!1,null,null,null);t.default=component.exports},661:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contact-chat"},[r("div",{staticClass:"rightchat animat-rate"},[r("div",{staticClass:"bg_circle"},[r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div"),e._v(" "),r("div")]),e._v(" "),r("div",{staticClass:"cross"}),e._v(" "),r("div",{staticClass:"cross1"}),e._v(" "),r("div",{staticClass:"cross2"}),e._v(" "),r("div",{staticClass:"dot"}),e._v(" "),r("div",{staticClass:"dot1"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"call-list-center"},[n("img",{attrs:{src:r(291),alt:""}}),e._v(" "),n("div",{staticClass:"animated-bg"},[n("i"),n("i"),n("i")]),e._v(" "),n("p",[e._v("Select a chat to read messages")])])}],c=r(0),d=r(23),o=(r(37),r(5),r(4),r(2),r(1),r(6),r(3),r(7),r(57),r(17)),l=r(599),v=r(123),f=r.n(v),m=r(587);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var _={components:{DropDown:l.default},data:function(){return{currentchat:[],testdata:[],refresh:!1,styleObject:{"background-size":"cover","background-position":"center",display:"block"}}},methods:{preview:function(){window.open("https://img.huffingtonpost.com/asset/5ab4d4ac2000007d06eb2c56.jpeg?cache=sih0jwle4e&ops=1910_1000","_blank")},resendfailed:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log(e),"TEXT"!=e.contenttype){r.next=9;break}return n={sessionId:e.sessionid,referenceKey:Object(m.v4)(),contentType:"TEXT",content:e.content,destructTime:0,senderId:t.userprofile.id,oaId:t.userprofile.id},t.setMessage(t.sessionID),r.next=6,t.$store.dispatch("chat/addChat",n);case 6:c=r.sent,console.log(c),"success"!=c.data.message&&(t.addDataToRealm(n,"failedUpdateDummyMesaage"),t.setMessage(t.sessionID));case 9:case"end":return r.stop()}}),r)})))()},addMessage:function(e){var t=e.target.scrollHeight;if(e.target.scrollTop<=0){this.$store.state.chat.messagelength+=5,this.setMessage(this.sessionroom);var r=document.querySelector(".scrolltopdirectchat");setTimeout((function(){var e=r.scrollHeight-t;r.scrollBy(0,e)}),10)}},checksender:function(e){if(this.userprofile.adminuserids)return-1!=this.userprofile.adminuserids.indexOf(e)},getImgUrl:function(path){return r(56)("./"+path)},infoTime:function(time){var e=f.a.utc(time).toDate();return f()(e).local().format("DD/MM/YYYY")==f()(new Date).format("DD/MM/YYYY")?f()(e).local().format("HH:mm"):f()(e).local().format("DD/MM")}},mounted:function(){console.log("firsttime"),document.querySelector(".scrolltopdirectchat").addEventListener("scroll",this.addMessage,!1)},beforeDestroy:function(){document.querySelector(".scrolltopdirectchat").removeEventListener("scroll",this.addMessage,!1)},destroyed:function(){document.querySelector(".scrolltopdirectchat").removeEventListener("scroll",this.addMessage,!1)},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)({typing:function(e){return e.chat.typing},sessionroom:function(e){return e.chat.session},userprofile:function(e){return e.auth.profile},roomtype:function(e){return e.room.roomtype},currentChat:function(){return this.currentchat=this.$store.getters["chat/currentChat"]}}))},y=_,x=r(11),component=Object(x.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contact-chat"},[r("ul",{staticClass:"chatappend"},[e.currentChat.chat?e._l(e.currentChat.chat,(function(t,n){return r("li",{key:n,class:t.senderid==e.userprofile.id||e.checksender(t.senderid)?"sent":"replies",style:e.currentChat.unread&&t.senderid!=e.userprofile.id&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread?"width:100%":"width:80%"},[e.currentChat.unread&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread&&t.senderid!=e.userprofile.id&&"user"==e.roomtype?r("p",{staticClass:"unreadmessage",staticStyle:{"margin-top":"1rem","text-align":"center","background-color":"#fff",color:"#2a2a54","border-radius":"10px"}},[e._v("\n          Unread message below\n        ")]):e._e(),e._v(" "),e.currentChat.unread&&t.createdtime==e.currentChat.unread&&t.messageid==e.currentChat.firstunread&&"official"==e.roomtype&&1!=e.checksender(t.senderid)?r("p",{staticClass:"unreadmessage",staticStyle:{"margin-top":"1rem","text-align":"center","background-color":"#fff",color:"#2a2a54","border-radius":"10px"}},[e._v("\n          Unread message below\n        ")]):e._e(),e._v(" "),r("div",{staticClass:"media"},[r("div",{staticClass:"profile mr-4",style:t.senderid==e.userprofile.id||e.checksender(t.senderid)?[{"background-image":"null"!=e.userprofile.avatars.source?"url("+e.userprofile.avatars.source+")":"url(/_nuxt/src/renderer/assets/images/media/1.jpg)"},e.styleObject]:[{"background-image":"null"!=t.avatar?"url("+t.avatar+")":"url(/_nuxt/src/renderer/assets/images/media/1.jpg)"},e.styleObject]}),e._v(" "),r("div",{staticClass:"media-body"},[r("div",{staticClass:"contact-name"},[r("h5",[e._v("\n                "+e._s(t.senderid==e.userprofile.id||e.checksender(t.senderid)?"":t.displayname)+"\n              ")]),e._v(" "),r("ul",{staticClass:"msg-box"},[r("li",{staticClass:"msg-setting-main"},["TEXT"==t.contenttype?r("h5",{staticStyle:{"white-space":"pre-wrap","text-align":"left","word-break":"break-all"}},[e._v(e._s(t.content))]):e._e(),e._v(" "),"IMAGE"==t.contenttype?r("div",{style:t.senderid==e.userprofile.id||e.checksender(t.senderid)?"background:transparent;border-radius:6px 2px 6px 6px":"background:transparent;border-radius:2px 6px 6px 6px;"},[r("div",{staticStyle:{display:"flex","flex-wrap":"wrap","max-width":"257px"},style:t.media.length>1?"width:257px":""},e._l(t.media,(function(image){return r("div",{key:image.id,style:t.media.length>1?"flex:1 1 50%;border:1px solid transparent;height:126px":"flex:0 0 100%"},[r("img",{staticStyle:{width:"100%",height:"100%","object-fit":"cover","object-position":"center","max-height":"346px"},style:t.senderid==e.userprofile.id||e.checksender(t.senderid)?"border-radius:6px 2px 6px 6px":"border-radius:2px 6px 6px 6px",attrs:{src:image.imageSource}})])})),0)]):e._e(),e._v(" "),r("div",{staticStyle:{display:"flex","flex-direction":"column"}},["READ"!=t.status||t.senderid!=e.userprofile.id&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm ml-2",class:"badge-success",staticStyle:{display:"block"}},[e._v("\n                      R\n                    ")]),e._v(" "),"READ"==t.status?r("div",{staticClass:"badge sm ml-2"},[e._v("\n                      "+e._s(e.infoTime(t.createdtime))+"\n                    ")]):e._e()]),e._v(" "),r("div",{staticStyle:{display:"flex","flex-direction":"column"}},["SENT"!=t.status||t.senderid!=e.userprofile.id&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm ml-2",class:"badge-dark",staticStyle:{display:"block"}},[e._v("\n                      S\n                    ")]),e._v(" "),"SENT"==t.status?r("div",{staticClass:"badge sm ml-2"},[e._v("\n                      "+e._s(e.infoTime(t.createdtime))+"\n                    ")]):e._e()]),e._v(" "),"WAITING"!=t.status||t.senderid!=e.userprofile.id&&!e.checksender(t.senderid)?e._e():r("div",{staticClass:"badge sm ml-2",class:"badge-warning"},[e._v("\n                    W\n                  ")]),e._v(" "),"FAILED"!=t.status||t.senderid!=e.userprofile.id&&!e.checksender(t.senderid)?e._e():r("div",{staticStyle:{display:"flex","flex-direction":"row","margin-right":"10px"}},[r("a",{staticStyle:{background:"red","border-radius":"50%",width:"20px",height:"20px",color:"white","text-align":"center","font-weight":"bold"},on:{click:function(r){return e.resendfailed(t)}}},[e._v("\n                      !\n                    ")])])])])])])])])})):e._e(),e._v(" "),e.currentChat.chat?e._e():r("div",[e._m(0),e._v(" "),e._m(1)])],2)])}),n,!1,null,null,null);t.default=component.exports}}]);